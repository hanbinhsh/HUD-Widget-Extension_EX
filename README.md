# HUD Widget Extension EX

一个面向 **Sao Utils** 的可高度自定义插件合集。
添加了一个独立于原版 HUD 挂件的新HUD（HUD EX），并新增了高度可定制的 EX 启动器（EX Launcher）。在提供大量增强功能的同时，保持与原版挂件间的无缝切换。



**Steam 创意工坊**：[https://steamcommunity.com/sharedfiles/filedetails/?id=2940727216](https://steamcommunity.com/sharedfiles/filedetails/?id=2940727216)

搜索关键词：**HUD自定义挂件_EX**

![banner](https://github.com/user-attachments/assets/cb5dac61-d5cb-46a7-9af5-dca5909f8761)

![主截图](https://github.com/user-attachments/assets/8df7231d-3c1f-4ce1-9b77-f3de241bd6ee)

---

# 特性亮点

* 可独立替换原版 HUD 挂件并无缝切换
* 丰富的显示/隐藏动画与方向、形状自定义
* 周期动画与数据驱动动画（支持平滑过渡）
* 支持更多鼠标交互（点击、悬停、按下等）
* 遮罩（mask）与替代图片数据源选择
* 全局渐变与挂件级渐变（支持多色、延迟、动画）
* 高级图像挂件：渐变颜色、渐变动画、幻灯片、平滑边缘、动作设置
* 高级文本挂件：颜色渐变与渐变动画
* 音频组件：支持圆形/多边形/自定义极坐标显示、音频驱动颜色/位置/变换
* 全新组件集合：雷达图、波浪进度球、音频可视化组件、网页挂件 等
* EX 启动器（EX Launcher）：支持挂件显示动画定制、音频响应、元素分组与嵌套

![特性截图](https://github.com/user-attachments/assets/7253b39e-3cc2-4fe6-8d03-580bee2852a2)
![EX Launcher](https://github.com/user-attachments/assets/cf7cdc7d-d814-4b10-a508-1c166d915457)

---

# 安装说明

1. 通过创意工坊订阅：打开上方创意工坊链接并订阅。
2. 或手动安装：将插件文件夹放入 Sao Utils 插件目录（示例）：

   ```
   SAO Utils 安装目录/Packages/com.hanbinhsh.widget.hud_edit/
   ```
3. 启动/重启 Sao Utils，进入管理挂件界面，添加 `基础挂件 -> HUD 自定义挂件 EX`。
4. （可选）若使用音频可视化相关功能，请确保已订阅/安装音频可视化依赖插件（创意工坊上有单独的音频可视化插件）。
5. 切换原版HUD挂件到HUD EX：
   
   ```
   SAO Utils 安装目录\Configs\system\widgets\
   ```

   内，将你需要切换的原版HUD挂件的配置文件（.xml）打开，找到

   ```
   <value name="source">"nvg://hud.widget.gpbeta.com/widget/adv"</value>
   ```

   改为：

   ```
   <value name="source">"nvg://hud_edit.widget.hanbinhsh.com/widget/adv"</value>
   ```

---

# 快速上手

* 添加挂件 → 选择 `HUD 自定义挂件_EX`。
* 在挂件属性中，展开 **Data / Audio / Style / Animation** 等面板，绑定数据源或音频端口。
* 通过 **Axis / Mask / Replace Image** 等选项调整图像裁剪与替换行为。
* 在 EX 启动器中，可以将挂件拖入启动器元素并设置显示动画与激活方式（默认右键关闭，中键打开设置）。

---

# 配置与使用细节

## 常用设置（分类）

* **显示/隐藏动画**：支持方向、形状、时长、延迟与显示前后蒙版。
* **交互**：悬停、点击、按下可触发移动/旋转/缩放/闪烁等动画。
* **渐变**：全局渐变与控件渐变，支持多色与位置精确控制，右键可删除某个渐变颜色点。
* **图像**：支持遮罩（mask）、替代图片（replace source）、幻灯片、平滑边缘与蒙版模糊。记得在使用替代图片裁剪时关闭原图显示以达到预期效果。
* **音频**：可将挂件属性（颜色/位置/旋转/可见性）与音频频谱或能量绑定，支持自定义衰减比率。
* **数据**：支持将外部脚本/插件输出（字符串或数列）作为数据源驱动动画/数值展示。

## 数据格式示例

* 简单数值序列（以空格分隔）：`"30 60 90 20 80 50"` → 用于雷达图等组件。
* JSON / 自定义脚本输出：视具体 DataPreference 绑定而定，请在 Data 面板查看可用字段。

## 与官方版本兼容性

* **0.4.0** 版本起：适配 Sao Utils 测试版（请手动升级到测试版）。
* 注意：部分早期版本不兼容正式版或不同测试版本的内部 API，遇到显示/功能异常请先确认 Sao Utils 版本。

---

# 音频可视化（注意事项）

* 若启用音频可视化，可能需要在 `Sao Utils` 的配置文件中调整客户端接收数量：

  ```
  SAO Utils 安装目录\Packages\top.mashiros.widget.advp\bin\advConfig.ini
  ```

  修改 `maxclient` 以允许更多挂件接收音频数据（**增加会带来更高性能开销**）。
* 如果出现卡顿，建议：

  * 降低音频采样率或降低 `maxclient` 值；
  * 在音频组件内调整衰减比率 / 平滑参数；
  * 减少同时运行的音频驱动挂件数量。
* 订阅音频可视化插件（创意工坊）以确保完整功能。

> ⚠ 性能提示：音频可视化与大量动画会消耗显卡与 CPU，建议在高帧率需求场景下适量开启高级特效。

---

# 常见问题（FAQ）

**Q：挂件不显示或很小？**
A：0.3.5.1 版本调整了缩放倍率；若你在旧版本修改过缩放，更新后可能需要手动恢复或调整缩放属性。

**Q：悬停/点击动画不生效？**
A：请确认在挂件属性中开启了相应特效开关，部分交互在菜单中需要先启用“特效开关”。

**Q：替换图片裁剪后看不到预期效果？**
A：确保关闭原图片显示，并在替换图片（Replace Image）与遮罩（Mask）选择正确的数据源或图片路径。

**Q：在 EX Launcher 中如何添加挂件？**
A：在 EX Launcher 设置中，点击右下角的加号按钮即可添加挂件。

---

# 更新日志

> 注：完整变更请参见UpdateLog.md。

* **0.9.1**（当前）
  
  * 改进：完成控制按钮的EXL组件功能，修复EXL报错。
* **0.9.0**
  
  * 新增：点击涟漪效果；番茄时钟、控制器（滑动条、旋钮和开关）、步进器
  * 改进：涟漪效果面板打开报错、鼠标点击穿透等。
* **0.8.10.1**

  * 改进：修复高级图像的颜色渐变动画选择开始和结束颜色以及动画时间需要保存后关闭菜单才会显示，修复高级图像未开启动画时就显示动画
* **0.8.10**

  * 改进：重构了渐变和其动画的代码（包括了对高级图像挂件的优化）；优化菜单布局
  * 新增：在顶层挂件到内层元素都增加了渐变和渐变动画选项
* **0.8.9**

  * 改进：重做高级图像的自定义颜色Ⅲ，修复了颜色渐变动画的跳变；优化各大UI的组织结构，由指示器代替了原来的"---"
* **0.8.8**

  * 改进：数据悬停与常态逻辑修复
  * 新增：webelement、雷达图、波浪球、音频组件
  * 完成汉化
* **0.8.7**

  * 新增：自定义动作控制挂件元素开关（支持 HideBeforeAction）
* **0.8.6**

  * EX 启动器元素编辑时显示外框并支持嵌套挂件
* **0.8.5**

  * EX 启动器支持创建多个控件；添加控制 EX 启动器的自定义动作项
* **0.8.2**

  * 右键菜单加入 EX Launcher 设置项；音频数据可自定义衰减比率
* **0.8.0**

  * 新增 EX Launcher（默认右键关闭，中键打开设置）
* 早期版本（0.2 — 0.7.5.1）包含多次功能迭代、渐变与动画改进、幻灯片与截图功能、汉化与性能优化

---

# 联系方式

* 创意工坊页面（留言）: [https://steamcommunity.com/sharedfiles/filedetails/?id=2940727216](https://steamcommunity.com/sharedfiles/filedetails/?id=2940727216)
* 如需帮助，可在创意工坊评论区或仓库 Issue 区联系我。
